Bootstrap: docker
From: vllm/vllm-openai:v0.10.0

%environment
    export SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
    export PYTHONNOUSERSITE=1
    export VLLM_ALLOW_INSECURE_SERIALIZATION=1

%post
    apt-get update && \
    apt-get install -y --no-install-recommends git curl ca-certificates ripgrep
    
    pip install --upgrade pip
    
    # Same torch/flash-attn setup as training container
    pip install torch==2.7.1+cu128 --index-url https://download.pytorch.org/whl/cu128
    
    # Nano
    pip install nano-agent gitpython
    # Mini-Swe-Agent and SWE Bench
    pip install mini-swe-agent
    # Misc
    pip install openai anthropic requests jsonlines datasets